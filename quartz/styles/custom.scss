@use "./base.scss";
@use "./variables.scss" as *;

// put your custom CSS here!

:root {
  /* Mado-11 Palette */
  --mado-white-1: hsla(204, 45%, 97%, 1);
  --mado-white-2: hsla(210, 45%, 95%, 1);
  --mado-white-3: hsla(212, 17%, 80%, 0.2);
  --mado-white-3-1: hsla(180, 20%, 99%, 1);
  --mado-white-6: hsla(212, 17%, 80%, 0.3);
  --mado-white-4: hsla(180, 33%, 99%, 1);
  --mado-white-5: hsla(207, 10%, 90%, 0.1);

  --mado-blue-1: hsla(209, 95%, 62%, 1);
  --mado-blue-2: hsla(209, 85%, 72%, 0.5);

  --mado-black-1: hsla(0, 0%, 13%, 1);
  --mado-black-2: hsla(220, 20%, 35%, 1);
  --mado-gray-1: hsla(0, 0%, 33%, 1);
  --mado-gray-2: hsla(210, 15%, 70%, 0.2);
  --mado-gray-3: hsla(210, 15%, 20%, 0.2);
  --mado-gray-4: hsla(210, 15%, 30%, 0.5);
  --mado-gray-5: hsla(207, 17%, 90%, 1);
  --mado-gray-6: hsla(217, 15%, 83%, 1);

  --mado-yellow: hsla(60, 100%, 50%, 0.4);
  --mado-orange: hsla(25, 75%, 65%, 1);
  --mado-red-1: hsla(365, 90%, 62%, 1);
  --mado-red-2: hsl(365, 95%, 85%, 1);
  --mado-red-3: hsl(365, 85%, 45%, 1);

  --button-radius: 4px;
  --window-radius: 8px;
  --readable-line-length: 45rem;

  /* Orange Jist */
  --accent-h: 23;
  --accent-s: 100%;
  --accent-l: 61%;

  --bgcolor-h: 204;
  --bgcolor-s: 45%;
  --bgcolor-l: 97%;

  --titlebar-background: var(--background-secondary);
  --titlebar-background-focused: var(--background-secondary);

  --background-modifier-hover: var(--color-base-hover);

  --bold-weight: var(--font-bold);
  --italic-color: var(--text-muted);
  --code-normal: var(--text-muted);
  --blockquote-color: var(--color-muted);

  --background-primary: var(--color-base-00);
  --background-secondary: var(--color-base-20);
  --checklist-done-color: var(--color-base-50);

  --icon-m: 20px;
  --icon-l: 20px;
  --divider-width: 4px;
  --callout-padding: 0px;
  --callout-title-padding: 11px;
  --callout-content-padding: 0 11px 0 27px;

  --embed-padding: 13px 23px;
  --list-indent: 37px;

  --header-height: 43px;
  --tab-stacked-header-width: 53px;

  /* custom */
  --border: 1px solid var(--tab-outline-color);
  --button-radius: 4px;
  --panel-radius: 8px;
  --window-radius: 23px;
  --button-padding-icon: 7px;
  --button-padding-long: 7px 15px;

  --background-fourth: var(--color-base-00-0);
  --background-fifth: var(--color-base-20-0);
  --panel-shadow: 0 1px 3px var(--color-base-shadow);
  --panel-shadow-hover: 0 3px 5px var(--color-base-shadow-hover);
  --window-shadow: 0 0 9px var(--color-base-shadow-hover);
  --window-shadow-left: -4px 0 5px var(--color-base-shadow-hover);
  --window-shadow-right: 4px 0 5px var(--color-base-shadow-hover);

  --sidebar-size-left: 270px;
  --sidebar-size-right: 270px;

  --color-strikethrough: var(--text-faint);
  --italic-color: var(--color-italic);
  --inline-code-color: var(--color-red);
}

:root {
  --color-black: var(--mado-black-1);
  --color-dark-gray: var(--mado-gray-1);
  --color-accent: var(--mado-blue-1);
  --color-accent-alt: var(--mado-blue-2);
  --color-gray: var(--mado-gray-2);
  --color-light-gray: var(--mado-gray-3);
  --color-medium-gray: var(--mado-gray-4);

  --modal-group-border: var(--mado-gray-6);
  --button-selected: var(--mado-white-6);
  --button-hover: var(--mado-white-6);
  --button-selected-hover: var(--mado-white-3);

  --window-shadow: 0 1px 3px var(--mado-white-3);
  --window-shadow-hover: 0 3px 5px var(--mado-white-6);
  --window-shadow-transparent: 0 3px 5px transparent;

  --border: 1px solid var(--mado-gray-5);

  --background-primary: var(--mado-white-1);
  --background-secondary: var(--mado-white-2);
  --background-secondary-alt: var(--mado-gray-5);
  --background-tertiary: var(--mado-white-3);

  --background-accent: var(--mado-blue-1);
  --background-fourth: var(--mado-white-4);
  --background-fifth: var(--mado-white-5);
  --background-sixth: var(--mado-white-4);
  --background-code-for-mado: var(--background-primary-alt);

  --text-code: var(--mado-red-3);
  --text-normal: var(--mado-black-1);
  --text-error: var(--mado-red-1);
  --text-on-accent: var(--mado-white-1);
  --text-faint: var(--mado-gray-6);
  --text-highlight-bg: var(--mado-yellow);
  --text-bold: var(--mado-black-2);
  --text-em: var(--mado-gray-4);
  --text-muted: hsla(218, 19%, 39%, 1);

  --background-modifier-error: var(--mado-red-1);
  --background-modifier-border: var(--mado-gray-5);
  --interactive-accent: var(--mado-blue-1);
  --indentation-guide: var(--mado-gray-5);

  --scrollbar-bg: transparent;

  /*https://github.com/hydescarf/Obsidian-Theme-Mado-Miniflow/blob/main/theme.css*/
  /*theme-violette
  --accent-h: 254;
  --accent-s: 80%;
  --accent-l: 68%;
  */
  --accent-h: 229;
  --accent-s: 83%;
  --accent-l: 53%;

  --color-base-00: hsla(
    calc(var(--bgcolor-h) - 0),
    calc(var(--bgcolor-s) - 0%),
    calc(var(--bgcolor-l) - 0%),
    1
  );
  --color-base-10: hsla(
    calc(var(--bgcolor-h) + 6),
    calc(var(--bgcolor-s) - 8%),
    calc(var(--bgcolor-l) - 1%),
    1
  );

  --color-base-05: hsla(
    calc(var(--bgcolor-h) + 3),
    calc(var(--bgcolor-s) - 28%),
    calc(var(--bgcolor-l) - 5%),
    1
  );
  --color-base-20: hsla(
    calc(var(--bgcolor-h) + 6),
    calc(var(--bgcolor-s) - 0%),
    calc(var(--bgcolor-l) - 0%),
    1
  );

  --color-base-00-trans: hsla(
    calc(var(--bgcolor-h) - 0),
    calc(var(--bgcolor-s) - 0%),
    calc(var(--bgcolor-l) - 0%),
    0.5
  ); /*for transparency background*/
  --color-base-20-trans: hsla(
    calc(var(--bgcolor-h) + 6),
    calc(var(--bgcolor-s) - 8%),
    calc(var(--bgcolor-l) - 1%),
    0.5
  );
  --color-base-00-0: hsla(
    calc(var(--bgcolor-h) - 0),
    calc(var(--bgcolor-s) - 12%),
    calc(var(--bgcolor-l) + 4%),
    1
  ); /* very white */
  --color-base-20-0: hsla(
    calc(var(--bgcolor-h) + 0),
    calc(var(--bgcolor-s) - 35%),
    calc(var(--bgcolor-l) - 5%),
    0.1
  ); /* hovered version for above */
  --color-base-00-0-trans: hsla(
    calc(var(--bgcolor-h) - 0),
    calc(var(--bgcolor-s) - 12%),
    calc(var(--bgcolor-l) + 4%),
    0.5
  );
  --color-base-shadow: hsla(212, 17%, 80%, 0.2); /* shadow */
  --color-base-shadow-hover: hsla(212, 17%, 80%, 0.3); /* shadow hover*/
  --color-base-hover: var(--color-base-shadow-hover); /* hover*/

  --color-base-35: hsla(210, 15%, 73%, 1);
  --color-base-50: hsla(217, 15%, 73%, 1);
  --color-base-70: hsla(218, 19%, 39%, 1);
  --color-base-100: hsla(0, 0%, 13%, 1); /* text-normal color */

  --color-accent-1: hsl(
    calc(var(--accent-h) - 0),
    calc(var(--accent-s) - 0%),
    calc(var(--accent-l) + 10%)
  );
  --color-accent-2: hsl(
    calc(var(--accent-h) - 0),
    calc(var(--accent-s) - 0%),
    calc(var(--accent-l) - 5%)
  );

  --color-red: hsla(365, 85%, 55%, 1);
  --color-muted: var(--color-base-70);
  --color-italic: hsla(215, 43%, 63%, 1);

  --color-highlight: var(--text-normal); /* for highlight text color */
}

[saved-theme="dark"] {
  /* dark mode quick hack */
  --mado-white-1: hsla(215, 17%, 19%, 1);
  --mado-white-2: hsla(214, 24%, 15%, 1);
  --mado-white-3: hsla(212, 17%, 22%, 0.9);
  --mado-white-3-1: hsla(215, 17%, 22%, 1);
  --mado-white-6: hsla(212, 17%, 0%, 0.3);
  --mado-white-4: hsla(215, 22%, 13%, 1);
  --mado-white-5: hsla(207, 10%, 10%, 0.1);

  --mado-black-1: hsla(0, 0%, 73%, 1);
  --mado-black-2: hsla(213, 33%, 65%, 1);
  --mado-gray-1: hsla(0, 0%, 83%, 1);
  --mado-gray-2: hsla(210, 25%, 5%, 0.3);
  --mado-gray-3: hsla(210, 15%, 50%, 0.4);
  --mado-gray-4: hsla(210, 15%, 70%, 0.5);
  --mado-gray-5: hsla(207, 17%, 10%, 0.5);
  --mado-gray-6: hsla(217, 18%, 50%, 0.7);

  --mado-yellow: hsla(45, 63%, 43%, 1);

  --color-black: var(--mado-black-1);
  --color-dark-gray: var(--mado-gray-1);
  --color-accent: var(--mado-blue-1);
  --color-accent-alt: var(--mado-blue-2);
  --color-gray: var(--mado-gray-2);
  --color-light-gray: var(--mado-gray-3);
  --color-medium-gray: var(--mado-gray-4);

  --modal-group-border: var(--mado-gray-6);
  --button-selected: var(--mado-white-6);
  --button-hover: var(--mado-white-6);
  --button-selected-hover: var(--mado-white-3);

  --window-shadow: 0 1px 3px var(--mado-white-5);
  --window-shadow-hover: 0 3px 5px var(--mado-white-6);
  --window-shadow-transparent: 0 3px 5px transparent;

  --border: 1px solid var(--mado-gray-5);

  --background-primary: var(--mado-white-1);
  --background-secondary: var(--mado-white-2);
  --background-secondary-alt: var(--mado-gray-5);
  --background-tertiary: var(--mado-white-3);
  --background-primary-alt: var(--mado-white-6);

  --background-accent: var(--mado-blue-1);
  --background-fourth: var(--mado-white-3);
  --background-fifth: var(--mado-white-5);
  --background-sixth: var(--mado-white-5);
  --background-code-for-mado: var(--mado-white-5);

  --text-code: var(--mado-red-1);
  --text-normal: var(--mado-black-1);
  --text-error: var(--mado-red-1);
  --text-on-accent: var(--mado-white-1);
  --text-faint: var(--mado-gray-6);
  --text-highlight-bg: var(--mado-yellow);
  --text-bold: var(--mado-black-2);
  --text-em: var(--mado-gray-6);
  --text-muted: hsl(218, 17%, 58%);

  --background-modifier-error: var(--mado-red-1);
  --background-modifier-border: var(--mado-gray-5);
  --interactive-accent: var(--mado-blue-1);
  --indentation-guide: var(--mado-gray-3);

  --scrollbar-bg: transparent;

  /*https://github.com/hydescarf/Obsidian-Theme-Mado-Miniflow/blob/main/theme.css*/
  /*theme-violette.theme-dark
  --accent-h: 255;
  --accent-s: 73%;
  --accent-l: 68%;
  */
  /*heme-deep-blue.theme-dark*/
  --accent-h: 229;
  --accent-s: 78%;
  --accent-l: 63%;

  --bgcolor-h: 215;
  --bgcolor-s: 17%;
  --bgcolor-l: 19%;

  --color-base-00: hsla(
    calc(var(--bgcolor-h) - 0),
    calc(var(--bgcolor-s) - 0%),
    calc(var(--bgcolor-l) - 0%),
    1
  );
  --color-base-10: hsla(
    calc(var(--bgcolor-h) - 1),
    calc(var(--bgcolor-s) + 7%),
    calc(var(--bgcolor-l) - 4%),
    1
  );

  --color-base-05: hsla(
    calc(var(--bgcolor-h) - 8),
    calc(var(--bgcolor-s) - 0%),
    calc(var(--bgcolor-l) - 9%),
    0.5
  );
  --color-base-20: hsla(
    calc(var(--bgcolor-h) - 1),
    calc(var(--bgcolor-s) + 7%),
    calc(var(--bgcolor-l) - 4%),
    1
  );

  --color-base-00-trans: hsla(
    calc(var(--bgcolor-h) - 0),
    calc(var(--bgcolor-s) - 0%),
    calc(var(--bgcolor-l) - 0%),
    0.5
  ); /*for transparency background*/
  --color-base-20-trans: hsla(
    calc(var(--bgcolor-h) - 1),
    calc(var(--bgcolor-s) + 7%),
    calc(var(--bgcolor-l) - 4%),
    0.5
  );
  --color-base-00-0: hsla(
    calc(var(--bgcolor-h) - 0),
    calc(var(--bgcolor-s) - 0%),
    calc(var(--bgcolor-l) + 3%),
    0.9
  ); /* very white */
  --color-base-20-0: hsla(
    calc(var(--bgcolor-h) - 0),
    calc(var(--bgcolor-s) - 7%),
    calc(var(--bgcolor-l) - 9%),
    0.1
  ); /* hovered version for above */
  --color-base-00-0-trans: hsla(
    calc(var(--bgcolor-h) - 0),
    calc(var(--bgcolor-s) - 0%),
    calc(var(--bgcolor-l) + 3%),
    0.5
  );
  --color-base-shadow: hsla(207, 10%, 10%, 0.1); /* shadow */
  --color-base-shadow-hover: hsla(212, 17%, 0%, 0.3); /* shadow hover*/
  --color-base-hover: var(--color-base-05); /* hover*/

  --color-base-30: hsla(215, 22%, 13%, 1);
  --color-base-35: hsla(210, 15%, 33%, 1);
  --color-base-50: hsla(217, 18%, 50%, 0.7);
  --color-base-70: hsl(218, 17%, 58%); /* text-muted */
  --color-base-100: hsla(0, 0%, 73%, 1); /* text-normal color */

  --color-accent: hsl(
    calc(var(--accent-h) - 0),
    calc(var(--accent-s) + 13%),
    calc(var(--accent-l) + 3%)
  );
  --color-accent-1: hsl(
    calc(var(--accent-h) - 3),
    calc(var(--accent-s) - 13%),
    calc(var(--accent-l) - 3%)
  );
  --color-accent-2: hsl(
    calc(var(--accent-h) - 0),
    calc(var(--accent-s) + 7%),
    calc(var(--accent-l) + 2%)
  );

  --color-red: hsla(365, 90%, 65%, 1);
  --color-muted: hsl(218, 17%, 62%);
  --color-italic: hsla(215, 33%, 60%, 1);

  --color-highlight: hsla(45, 63%, 63%, 1); /* for highlight text color */
  --text-highlight-bg: hsla(45, 53%, 53%, 1); /* for highlight text underline color */
}

body,
section {
  background-color: var(--background-secondary);
  font-family: var(--bodyFont);
  color: var(--text-normal);
  /*z-index: -10;*/
}

.right.sidebar {
  overflow: visible;
  z-index: 1;
}

body::before {
  content: "";
  position: fixed;
  width: max(100%, 1200px);
  height: 100%;
  -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none" xml:space="preserve"><path opacity=".1" d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z"/><path opacity=".2" d="M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z"/><path opacity=".4" d="M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z"/></svg>');
  -webkit-mask-size: 300% 300px;
  -webkit-mask-position: 88.5% -73px;
  -webkit-mask-repeat: no-repeat;
  mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none" xml:space="preserve"><path opacity=".1" d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z"/><path opacity=".2" d="M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z"/><path opacity=".4" d="M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z"/></svg>');
  mask-size: 300% 300px;
  mask-position: 88.5% -73px;
  mask-repeat: no-repeat;
  background-color: var(--mado-blue-1);
  transform: rotateZ(180deg);
  opacity: 0.5;
}

.page,
.page-header {
  margin: 0 auto !important;
}

@media all and (max-width: $pageWidth) {
  h1.page-title.mobile-only {
    > a {
      font-size: 0;
    }

    > a:after {
      font-size: 1.75rem;
      content: "🌷";
    }
  }

  div.spacer.mobile-only {
    display: none;
  }

  header,
  div.header-container {
    max-width: 100%;
    margin-right: 0;
    position: fixed;
    .search {
      width: auto;
    }
  }

  div.header-container > header {
    margin-left: 0;
    width: calc(100vw - 32px) !important;
  }

  div.header-container {
    margin-left: -36px;
    width: calc(100vw - 32px) !important;
  }
}

@media all and (max-width: $fullPageWidth) {
  header,
  .header-container {
    //width: calc($pageWidth - 2px) !important;
    width: $pageWidth !important;
  }
}

@media all and (max-width: 380px) {
  .search > #search-icon > p {
    display: none;
  }
  .search {
    width: min-content;
  }
}

header,
.header-container {
  max-height: 97px;
  height: 97px;
  top: 0;
  position: absolute;
  z-index: 15;
  margin-top: 0;
  margin-bottom: 0;
  margin-right: 0;
  position: fixed;
  width: calc($pageWidth + 72px);
  background-color: var(--background-secondary);
  display: flex;

  .search {
    width: $pageWidth;
  }
}

header {
  margin-left: 0;
}

.header-container {
  margin-left: -36px;
}

header::before,
.header-container::before {
  content: "";
  position: absolute;
  display: flex;
  top: 97px;
  height: 25px;
  width: 25px;
}

header::before {
  border-top-left-radius: var(--window-radius);
  background-color: var(--background-primary);
}

.header-container::before {
  background-color: var(--background-secondary);
}

header::after,
.header-container::after {
  content: "";
  position: absolute;
  display: flex;
  top: 97px;
  right: 0;
  height: 25px;
  width: 25px;
}

header::after {
  border-top-right-radius: var(--window-radius);
  background-color: var(--background-primary);
}

.header-container::after {
  background-color: var(--background-secondary);
}

.center {
  background-color: var(--background-primary);
  //border: var(--border);
  border-radius: var(--window-radius);
  margin-top: 6rem;
  padding: 0 36px;
  z-index: 1;
  @media all and (max-width: $fullPageWidth) {
    margin-top: 4rem;
  }
}

hr {
  height: 2px;
}

footer > hr {
  background-color: var(--background-primary);
}

footer > ul {
  flex-wrap: wrap;
}

ul.overflow,
ol.overflow {
  &:after {
    background: transparent;
  }
}

mark,
p > mark {
  background: var(--secondary) !important;
}

.text-highlight {
  background-color: var(--secondary);
}

::selection {
  background: color-mix(in hsla, hsla(209, 95%, 62%, 0.75), transparent);
  color: var(--dark);
}

pre > code {
  overflow-x: auto;
}

.search {
  z-index: 1;
}

// Dice rolling support
.dice,
.dice::before {
  display: inline-block;
}

.dice-button {
  display: inline-block;
  font-family: var(--codeFont);
  color: var(--text-normal);
  border: 1px solid var(--color-light-gray);
  border-radius: var(--button-radius);
  background-color: var(--background-primary);
  &:hover {
    background-color: var(--button-hover);
    &:active {
      background-color: var(--button-selected-hover);
    }
  }
  &:active {
    background-color: var(--button-selected);
  }
}

// Hide inline tags, unless inside blockquote
a:not(blockquote p a)[data-slug^="tags/"].tag-link.internal.alias {
  display: none;
}

span.internal-embed.markdown-embed.inline-embed {
  display: block;
  margin: 1rem 0;
}

/*
--------------------------- --------------------------- 
--------------------------- --------------------------- 
	Mado Theme Special Classes
--------------------------- --------------------------- 
--------------------------- --------------------------- 
*/
/* Mado Heading */

.center:has(.mado-heading) {
  padding: 0;
  > *:first-child {
    border: var(--border);
    border-radius: var(--button-radius);
    background-color: var(--mado-white-3-1);
  }
  > div.page-header {
    padding: 0 36px;
    > div.header-container > header::before,
    > div.header-container > header::after {
      background-color: var(--mado-white-3-1);
    }
    > div.header-container > header,
    > div.header-container {
      width: calc(100vw - 34px) !important;
    }
    > div.header-container > header > div.mobile-only.explorer #explorer-content:not(.collapsed) {
      background-color: var(--mado-white-3-1);
    }
  }
  @media all and (min-width: calc($pageWidth + 50px)) {
    > div.page-header {
      //width: calc($pageWidth - 2px) !important;
      width: calc($pageWidth - 2 * 36px - 2 * 1px) !important;
      > div.header-container,
      > div.header-container > header {
        width: $pageWidth !important;
      }
    }
  }
  > article.mado-heading > *:last-child,
  > .mado-heading > article > *:last-child {
    border-bottom-left-radius: 23px;
    border-bottom-right-radius: 23px;
  }
  > article.mado-heading > *:is(h1, h2, h3, h4, h5, h6):last-child::before {
    border-bottom-left-radius: 23px;
    border-bottom-right-radius: 0px;
  }
}

.mado-heading > *:not(blockquote.callout) {
  position: relative;
  padding: 13px 53px;
  margin: 0;
  border: var(--border);
  border-radius: var(--button-radius);
  background: var(--mado-white-3-1);
  transition: background 0.1s;
}
.mado-heading > .transclusion.internal-embed.is-loaded {
  padding: 0;
  > .markdown-embed > blockquote.callout {
    margin: 0;
  }
  > a.markdown-embed-link {
    display: inline;
    position: absolute;
    top: 15px;
    right: 15px;
  }
}
.mado-heading.mod-header > * {
  padding: 23px 23px 0;
  border: none;
}
.mado-heading:not(.is-collapsed) > h1 {
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
  border-bottom: none;
}
.mado-heading:not(.is-collapsed) > h1::before {
  border-radius: 4px 0 0 0;
}
.mado-heading:has(+ div > *:not(h1)) > *:not(h1) {
  border-radius: 0;
  border-bottom: none;
}
.mado-heading:has(+ div > h1) > *:not(h1),
.mado-heading:has(+ div.mod-footer) > *:not(h1) {
  border-radius: 0;
  border-bottom-left-radius: var(--button-radius);
  border-bottom-right-radius: var(--button-radius);
  border-bottom: var(--border);
}
.mado-heading :is(h1, h2, h3, h4, h5, h6) {
  background: var(--mado-white-3-1);
}
.mado-heading :is(h1, h2, h3, h4, h5, h6):hover {
  background: var(--background-fifth);
}
.mado-heading {
  --h1-size: 1.6em;
  --h2-size: 1.5em;
  --h3-size: 1.37em;
  --h4-size: 1.25em;
  --h5-size: 1.12em;
  --h6-size: 1.12em;
}

.mado-heading:has(+ div > p) > p {
  padding-bottom: 0;
}
.mado-heading:has(> p) + div > p {
  border-top: none;
}

.mado-heading h1 {
  padding-block: 19px;
  margin-top: 73px;
}
.mado-heading h2 {
  padding-block: 17px;
}
.mado-heading h3 {
  padding-block: 15px;
}
.mado-heading h4 {
  padding-block: 13px;
}

/* left border to indicate collapsible action */
.mado-heading :is(h1, h2, h3, h4, h5, h6)::before {
  content: "";
  position: absolute;
  left: 5px;
  top: 5px;
  height: calc(100% - 10px);
  border-radius: var(--button-radius);
  border-left: 3px solid var(--color-accent-1);
}
.mado-heading h1::before {
  left: 0;
  top: 0;
  height: 100%;
  border-radius: 4px 0 0 4px;
  border-left: 3px solid var(--color-accent-2);
}
.mado-heading h3::before {
  top: 7px;
  height: calc(100% - 14px);
}
.mado-heading h4::before {
  top: 9px;
  height: calc(100% - 18px);
}
.mado-heading h5::before {
  top: 11px;
  height: calc(100% - 22px);
}
.mado-heading h6::before {
  top: 13px;
  height: calc(100% - 26px);
}

.mado-heading .popover > .popover-inner {
  border-radius: var(--button-radius);
  border-left: 3px solid var(--color-accent-1);
  background-color: var(--mado-white-3-1);
  /* left border to indicate collapsible action */
  :is(h1, h2, h3, h4, h5, h6)::before {
    border-left: 3px solid transparent;
  }
  h1::before {
    border-left: 3px solid transparent;
  }
}

/* expand clickable collapsible size to match parent size */
.mado-heading .heading-collapse-indicator {
  margin-left: 0;
  width: 100%;
  height: 100%;
  padding: 9px 33px;
  top: 0;
  left: 0;
  position: absolute;
  opacity: 1;
}
.mado-heading .heading-collapse-indicator svg {
  right: 27px;
  width: 14px;
  height: 14px;
  position: absolute;
}

.mado-heading > p {
  padding-block: 23px;
  background: var(--mado-white-3-1);
  &:has(a.tag-link.internal.alias) {
    display: none;
  }
}
.mado-heading > :is(ul, ol) {
  padding-block: 23px;
  background: var(--mado-white-3-1);
}
.mado-heading > hr {
  display: none;
}
.mado-heading > pre {
  padding-block: 23px;
}
.mado-heading > blockquote {
  padding-block: 23px;
}
.mado-heading > .callout {
  position: relative;
  margin: 0 auto;
  padding: var(--callout-padding);
  //border: 1px solid rgba(var(--callout-color), 0.3);
  width: calc(100% - 2px);
  border-radius: var(--button-radius);
  transition: background 0.1s;
}
.mado-heading > .callout .callout-title {
  padding: 17px 23px;
}
.mado-heading > .callout .callout-content,
.mado-heading > .callout ul {
  padding: 3px 53px;
}
.mado-heading > blockquote > :is(ul, ol) {
  padding: 0;
}
.mado-heading > table {
  width: calc(100% + 0px);
  border-radius: var(--button-radius);
  border-collapse: separate;
  padding: 0;
  background: var(--background-secondary);
}
.mado-heading > table :is(th, td) {
  padding: 9px 11px;
  text-align: center;
  width: 83px;
}
.mado-heading > table th {
  background-color: var(--background-secondary);
  font-weight: 600;
  font-size: 1em;
}
.mado-heading > table td {
  background: var(--mado-white-3-1);
  border: none;
}
.mado-heading > table thead > tr > *:first-child {
  border-radius: 4px 0 0 0;
}
.mado-heading > table thead > tr > *:last-child {
  border-radius: 0 4px 0 0;
}
.mado-heading > table tbody > tr:last-child > *:first-child {
  border-radius: 0 0 0 4px;
}
.mado-heading > table tbody > tr:last-child > *:last-child {
  border-radius: 0 0 4px 0;
}
